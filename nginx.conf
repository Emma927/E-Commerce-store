# Brak fizycznych plików dla tras jest normalny w SPA.
# try_files ... /index.html jest właśnie po to, żeby to obsłużyć.
# Nginx ma zwracać index.html, a routing odbywa się w React Routerze.
# Bez tego — przy odświeżeniu na przykład /products otrzymasz 404. A w aplikacji React nie istnieje taki folder, ani plik — to tylko logiczna trasa obsługiwana przez React Router.

# nginx.conf jest niezbędny, ponieważ instruuje Nginxa, aby w przypadku braku fizycznego pliku zawsze zwracał główny plik index.html, pozwalając React Routerowi przejąć kontrolę nad routingiem w przeglądarce.
server {
    listen 8080;
    server_name localhost;

    # Główny katalog, z którego Nginx serwuje pliki
    root /usr/share/nginx/html;

# 1. Sytuacja "BROKEN" (bez try_files)
# Klikanie w przyciski na stronie: Działa (bo robi to JavaScript/React wewnątrz przeglądarki).
# Wpisanie adresu ręcznie (np. /products): BŁĄD 404. Serwer szuka fizycznego pliku, którego nie ma.
# 2. Sytuacja "FIXED" (z try_files $uri $uri/ /index.html;)
# Klikanie w przyciski na stronie: Działa.
# Wpisanie adresu ręcznie / Odświeżenie (F5): DZIAŁA.
    # --- KLUCZOWA KONFIGURACJA DLA REACT ROUTER (SPA) ---
    # $uri i $uri/ → spróbuj znaleźć fizyczny plik lub katalog.
    # /index.html → jeśli nie znajdziesz, zwróć główny plik index.html.
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Opcjonalnie: Nagłówki CORS, jeśli potrzeba... (odkomentuj jeśli konieczne)
    # add_header Access-Control-Allow-Origin *;
}
